import{r as l,c as u,a as s,d as v,b as V,e as o,w as C,t as I,f as N,g as c,o as i,u as b}from"./index-Di80kDZs.js";import{f as y,a as T}from"./unigueFilter-Cup9Age-.js";const B={key:0},L={key:1,style:{color:"red"}},A={key:2},M={__name:"Sales",props:{token:{type:String,required:!0},baseUrl:{type:String,required:!0}},setup(S){const d=l(""),m=l(""),a=l(null),p=l(!1),r=l(""),_=l([]),g=l([]),h=l([]),w=S;async function k(){p.value=!0,r.value="";try{const t=await T.get(w.baseUrl,{params:{dateFrom:d.value,dateTo:m.value,key:w.token,limit:500,page:1}});a.value=t.data,a.value&&(x(),D(),q())}catch(t){r.value=t.message}finally{p.value=!1}}function x(){const t=[...new Set(a.value.data.map(e=>e.date))];_.value=t.map(e=>({text:e,value:e}))}function D(){const t=[...new Set(a.value.data.map(e=>e.date_close))];g.value=t.map(e=>({text:e,value:e}))}function q(){const t=[...new Set(a.value.data.map(e=>e.warehouse_name))];h.value=t.map(e=>({text:e,value:e}))}return(t,e)=>{const F=c("el-mention"),n=c("el-table-column"),U=c("el-table");return i(),u("div",null,[e[5]||(e[5]=s("h1",null,"Sales",-1)),s("form",{onSubmit:C(k,["prevent"])},[s("label",null,[e[2]||(e[2]=V(" Date From: ",-1)),o(F,{type:"date",modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=f=>d.value=f),required:""},null,8,["modelValue"])]),s("label",null,[e[3]||(e[3]=V(" Date To: ",-1)),o(F,{type:"date",modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=f=>m.value=f),required:""},null,8,["modelValue"])]),e[4]||(e[4]=s("button",{type:"submit"},"Load",-1))],32),p.value?(i(),u("div",B,"Loading...")):v("",!0),r.value?(i(),u("div",L,I(r.value),1)):v("",!0),a.value&&Array.isArray(a.value.data)?(i(),u("div",A,[o(U,{data:a.value.data,style:{width:"100%"}},{default:N(()=>[o(n,{prop:"income_id",label:"ID",sortable:""}),o(n,{prop:"date",label:"Created at",sortable:"",filters:_.value,"filter-method":b(y)},null,8,["filters","filter-method"]),o(n,{prop:"last_change_date",label:"Last change date",sortable:"",filters:g.value,"filter-method":b(y)},null,8,["filters","filter-method"]),o(n,{prop:"warehouse_name",label:"Warehouse",sortable:"",filters:h.value,"filter-method":b(y)},null,8,["filters","filter-method"])]),_:1},8,["data"])])):v("",!0)])}}};export{M as default};
