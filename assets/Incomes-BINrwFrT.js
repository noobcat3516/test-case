import{r as l,c as u,a as n,d as v,b as S,e as o,w as D,t as N,f as U,g as c,o as i,u as y}from"./index-Di80kDZs.js";import{f as b,a as T}from"./unigueFilter-Cup9Age-.js";const B={key:0},C={key:1,style:{color:"red"}},A={key:2},Q={__name:"Incomes",props:{token:{type:String,required:!0},baseUrl:{type:String,required:!0}},setup(k){const d=l(""),m=l(""),a=l(null),p=l(!1),s=l(""),_=l([]),g=l([]),V=l([]),q=k;async function w(){p.value=!0,s.value="";try{const t=await T.get(q.baseUrl,{params:{dateFrom:d.value,dateTo:m.value,key:q.token,limit:500,page:1}});a.value=t.data,a.value&&(x(),I(),h())}catch(t){s.value=t.message}finally{p.value=!1}}function x(){const t=[...new Set(a.value.data.map(e=>e.tech_size))];_.value=t.map(e=>({text:e,value:e}))}function I(){const t=[...new Set(a.value.data.map(e=>e.quantity))];g.value=t.map(e=>({text:e,value:e}))}function h(){const t=[...new Set(a.value.data.map(e=>e.nm_id))];V.value=t.map(e=>({text:e,value:e}))}return(t,e)=>{const F=c("el-mention"),r=c("el-table-column"),z=c("el-table");return i(),u("div",null,[e[5]||(e[5]=n("h1",null,"Incomes",-1)),n("form",{onSubmit:D(w,["prevent"])},[n("label",null,[e[2]||(e[2]=S(" Date From: ",-1)),o(F,{type:"date",modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=f=>d.value=f),required:""},null,8,["modelValue"])]),n("label",null,[e[3]||(e[3]=S(" Date To: ",-1)),o(F,{type:"date",modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=f=>m.value=f),required:""},null,8,["modelValue"])]),e[4]||(e[4]=n("button",{type:"submit"},"Load",-1))],32),p.value?(i(),u("div",B,"Loading...")):v("",!0),s.value?(i(),u("div",C,N(s.value),1)):v("",!0),a.value&&Array.isArray(a.value.data)?(i(),u("div",A,[o(z,{data:a.value.data,style:{width:"100%"}},{default:U(()=>[o(r,{prop:"income_id",label:"ID",sortable:""}),o(r,{prop:"tech_size",label:"Size",sortable:"",filters:_.value,"filter-method":y(b)},null,8,["filters","filter-method"]),o(r,{prop:"quantity",label:"Quantity",sortable:"",filters:g.value,"filter-method":y(b)},null,8,["filters","filter-method"]),o(r,{prop:"nm_id",label:"NM ID",sortable:"",filters:V.value,"filter-method":y(b)},null,8,["filters","filter-method"])]),_:1},8,["data"])])):v("",!0)])}}};export{Q as default};
