import{r as a,c as u,a as r,d as f,b as w,e as o,w as h,t as I,f as N,g as v,o as i,u as b}from"./index-B_JoO3pZ.js";import{f as y,a as T}from"./unigueFilter-Cup9Age-.js";const A={key:0},B={key:1,style:{color:"red"}},L={key:2},M={__name:"Orders",props:{token:{type:String,required:!0},baseUrl:{type:String,required:!0}},setup(x){const d=a(""),m=a(""),l=a(null),p=a(!1),s=a(""),_=a([]),g=a([]),V=a([]),F=x;async function S(){p.value=!0,s.value="";try{const t=await T.get(F.baseUrl,{params:{dateFrom:d.value,dateTo:m.value,key:F.token,limit:500,page:1}});l.value=t.data,l.value&&(D(),q(),C())}catch(t){s.value=t.message}finally{p.value=!1}}function D(){const t=[...new Set(l.value.data.map(e=>e.date))];_.value=t.map(e=>({text:e,value:e}))}function q(){const t=[...new Set(l.value.data.map(e=>e.supplier_article))];g.value=t.map(e=>({text:e,value:e}))}function C(){const t=[...new Set(l.value.data.map(e=>e.date_close))];V.value=t.map(e=>({text:e,value:e}))}return(t,e)=>{const k=v("el-mention"),n=v("el-table-column"),U=v("el-table");return i(),u("div",null,[e[5]||(e[5]=r("h1",null,"Orders",-1)),r("form",{onSubmit:h(S,["prevent"])},[r("label",null,[e[2]||(e[2]=w(" Date From: ",-1)),o(k,{type:"date",modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=c=>d.value=c),required:""},null,8,["modelValue"])]),r("label",null,[e[3]||(e[3]=w(" Date To: ",-1)),o(k,{type:"date",modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=c=>m.value=c),required:""},null,8,["modelValue"])]),e[4]||(e[4]=r("button",{type:"submit"},"Load",-1))],32),p.value?(i(),u("div",A,"Loading...")):f("",!0),s.value?(i(),u("div",B,I(s.value),1)):f("",!0),l.value&&Array.isArray(l.value.data)?(i(),u("div",L,[o(U,{data:l.value.data,style:{width:"100%"}},{default:N(()=>[o(n,{prop:"income_id",label:"ID",sortable:""}),o(n,{prop:"date",label:"Created at",sortable:"",filters:_.value,"filter-method":b(y)},null,8,["filters","filter-method"]),o(n,{prop:"supplier_article",label:"Supplier article",sortable:"",filters:g.value,"filter-method":b(y)},null,8,["filters","filter-method"]),o(n,{prop:"date_close",label:"Date close",sortable:"",filters:V.value,"filter-method":b(y)},null,8,["filters","filter-method"])]),_:1},8,["data"])])):f("",!0)])}}};export{M as default};
