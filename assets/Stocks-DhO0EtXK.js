import{r as l,c as r,a as u,d as m,e as o,i as j,u as p,w as x,t as B,f as F,g as f,o as i}from"./index-Di80kDZs.js";import{f as _,a as V}from"./unigueFilter-Cup9Age-.js";const D={key:0},E={key:1,style:{color:"red"}},N={key:2},U="E6kUTYrYwZq2tN4QEtyzsbEBk3ie",C="http://109.73.206.144:6969/api/stocks",L={__name:"Stocks",setup(I){const s=new Date().toISOString().slice(0,10),a=l(null),c=l(!1),n=l(""),b=l([]),v=l([]);async function y(){c.value=!0,n.value="";try{const t=await V.get(C,{params:{dateFrom:s,key:U,limit:500,page:1}});a.value=t.data,a.value&&(g(),k())}catch(t){n.value=t.message}finally{c.value=!1}}function k(){const t=[...new Set(a.value.data.map(e=>e.subject))];v.value=t.map(e=>({text:e,value:e}))}function g(){const t=[...new Set(a.value.data.map(e=>e.barcode))];b.value=t.map(e=>({text:e,value:e}))}return(t,e)=>{const S=f("el-mention"),d=f("el-table-column"),h=f("el-table");return i(),r("div",null,[e[2]||(e[2]=u("h1",null,"Stocks",-1)),u("form",{onSubmit:x(y,["prevent"])},[u("label",null,[o(S,{type:"date",modelValue:p(s),"onUpdate:modelValue":e[0]||(e[0]=w=>j(s)?s.value=w:null),readonly:""},null,8,["modelValue"])]),e[1]||(e[1]=u("button",{type:"submit"},"Load",-1))],32),c.value?(i(),r("div",D,"Loading...")):m("",!0),n.value?(i(),r("div",E,B(n.value),1)):m("",!0),a.value&&Array.isArray(a.value.data)?(i(),r("div",N,[o(h,{data:a.value.data,style:{width:"100%"}},{default:F(()=>[o(d,{prop:"date",label:"Date"}),o(d,{prop:"barcode",label:"Barcode",sortable:"",filters:b.value,"filter-method":p(_)},null,8,["filters","filter-method"]),o(d,{prop:"subject",label:"Subject",sortable:"",filters:v.value,"filter-method":p(_)},null,8,["filters","filter-method"])]),_:1},8,["data"])])):m("",!0)])}}};export{L as default};
